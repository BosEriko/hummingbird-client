{{! Kitsu Media Characters 1 }}
{{#unless session.account.isPro}}
  {{ad-unit slot="4199795864"}}
{{/unless}}

<h2 class="d-inline-block">{{t "media.routes.show.characters.title" title=media.computedTitle}}</h2>
<p class="w-100">{{t (concat "media.routes.show.characters.subtitle." media.modelType) title=media.computedTitle}}</p>

{{#if model.taskInstance.isRunning}}
  <div class="text-xs-center w-100 m-t-1 m-b-1">
    {{loading-spinner size="large"}}
    <p>Loading Characters...</p>
  </div>
{{else if model.taskInstance.error}}
  <div class="text-xs-center w-100 m-t-1 m-b-1">
    {{t "errors.load"}}
  </div>
{{else if taskValue}}
  <section class="character-grid">
    {{#each taskValue as |item|}}
      <article class="media-character">
        <div class="character-wrapper">
          <div class="character-image">
            <a href="#">
              {{lazy-image src=(image item.character.image)}}
            </a>
          </div>
          <div class="character-name">
            <a href="#">{{item.character.name}}</a>
          </div>
          {{#if item.castings}}
            <div class="character-voice-actors">
              {{#each item.castings as |casting|}}
                <a href="#" class="va">
                  {{lazy-image src=(image casting.person.image)}}
                  <span>{{casting.person.name}} (<span class="va-locale">{{casting.locale}}</span>)</span>
                </a>
              {{/each}}
            </div>
          {{/if}}
        </div>
      </article>
    {{/each}}
  </section>

  <div class="text-xs-center w-100">
    {{paginated-resource/infinite
      model=taskValue
      update=(route-action "updateNextPage" "taskValue")
      loadingSize="large"
    }}
  </div>
{{else}}
  <div class="text-xs-center w-100 m-t-1 m-b-1">
    {{t "errors.contentEmpty"}}
  </div>
{{/if}}

{{! Kitsu Media Characters 2 }}
{{#unless session.account.isPro}}
  {{ad-unit slot="7153262266"}}
{{/unless}}
